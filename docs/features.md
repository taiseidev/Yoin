# 機能仕様書

## ユーザー種別と機能制限

| 機能 | ゲスト（未登録） | 登録ユーザー |
|---|:-:|:-:|
| ルーム作成 | ❌ | ✅ |
| ルーム参加 | ✅ | ✅ |
| 写真閲覧 | ✅ 全て見れる | ✅ |
| 撮影 | ⚠️ 5枚まで | ✅ 24枚/日 |
| マップ表示 | ✅ | ✅ |
| ダウンロード | ❌ | ✅ |
| 過去ルーム閲覧 | ✅ | ✅ |

### ゲスト制限の狙い

- **参加ハードルを下げる** - 誰でもすぐ参加できる
- **体験はできる** - 5枚撮れるのでアプリの楽しさがわかる
- **自然な登録動機** - 「もっと撮りたい」「写真欲しい」で登録へ
- **旅行の邪魔をしない** - 閲覧は全部できるので共有体験は損なわない

---

## MVP（v1.0）機能一覧

### 1. 旅行ルーム管理

| 機能 | 詳細 |
|---|---|
| ルーム作成 | 旅行名・期間（開始日〜終了日）・目的地を設定 |
| メンバー招待 | リンク or QRコードで招待 |
| ルーム一覧 | 参加中・過去のルームを一覧表示 |
| ルーム情報編集 | 作成者のみ編集可能 |

---

### 2. カメラ・撮影機能

| 機能 | 詳細 |
|---|---|
| 撮影枚数制限 | 1日24枚（ゲストは5枚まで） |
| 撮り直し | **完全不可** |
| 残り枚数表示 | 「残り18枚」のように表示 |
| 自動フィルター | フィルム風フィルターを自動適用 |
| 位置情報取得 | 撮影時にGPSで位置を自動記録 |
| 日付スタンプ | 写真に撮影日を刻印（ON/OFF可） |

---

### 3. AIフィルタリング（自動）

| 検出内容 | 対応 |
|---|---|
| 不適切コンテンツ（NSFW） | 自動削除 + 枚数返却（共有されない） |
| 真っ暗 / 真っ白 | 自動で1枚返却 + 通知 |
| 極度のブレ | 自動で1枚返却 + 通知 |
| 軽微なブレ・指の写り込み | そのまま保存（フィルムの味） |

#### 通知UIイメージ

```
┌─────────────────────────────┐
│  📷 1枚返却しました         │
│                             │
│  真っ暗な写真だったので、   │
│  フィルムを1枚戻しました。  │
│                             │
│  残り: 18枚 → 19枚         │
│                      [OK]   │
└─────────────────────────────┘
```

---

### 4. 現像・閲覧機能

| 機能 | 詳細 |
|---|---|
| 現像タイミング | **旅行最終日の翌朝9時**に一括現像 |
| 現像通知 | プッシュ通知でお知らせ |
| 撮影中の状態 | 「現像中...」と表示（写真は見えない） |
| 共有タイムライン | 現像後、メンバー全員の写真が時系列で表示 |
| 撮影者表示 | 各写真に「📷 ○○さん」と表示 |
| 撮影場所表示 | 各写真に「📍 渋谷区」など表示 |

---

### 5. 位置情報・マップ機能

| 機能 | 詳細 |
|---|---|
| マップビュー | 地図上に写真をピン留め表示 |
| ピンタップ | タップすると写真のサムネイルを表示 |
| 全員の写真表示 | メンバー全員の写真がマップに表示される |

---

### 6. エクスポート・保存機能

| 機能 | 詳細 |
|---|---|
| 個別ダウンロード | 写真を1枚ずつカメラロールに保存 |
| 一括ダウンロード | 全写真をまとめて保存 |
| ※ゲスト制限 | 登録ユーザーのみダウンロード可能 |

---

### 7. 通知機能

| 通知タイミング | 内容 |
|---|---|
| メンバー参加時 | 「○○さんが参加しました」 |
| 現像完了時 | 「📷 写真が現像されました！」 |
| AI返却時 | 「真っ暗だったので1枚戻しました」 |

---

## v2.0 追加予定機能

| 機能 | 詳細 |
|---|---|
| ミッション機能 | 旅行開始時にランダムでお題が届く |
| ミッションバッジ | クリアでバッジ獲得 |
| ベストショット投票 | 旅行終了後にメンバー間で投票 |
| 各種アワード | 「ベストスマイル賞」「MVP」など |
| 現像タイミング選択 | 「翌朝9時」「即時」など選べるように |
| フィルター選択 | 複数フィルターから選択可能 |
| ルート表示 | 移動ルートをマップ上に可視化 |
| フォトブック連携 | 外部サービスでフォトブック注文 |

### ミッション例（v2.0）

**撮影系**
- 🍜 地元のグルメを撮ろう
- 🌅 日の出 or 日没を撮ろう
- 😊 地元の人と一緒に撮ろう
- 🚃 乗り物の中から撮ろう
- 🔤 面白い看板を見つけよう

**アクション系**
- 📍 3箇所以上で撮影しよう
- 👥 全員が写った写真を撮ろう
- 🎲 くじで決まったお題を撮ろう

**旅行終了後**
- 🏆 ベストショット投票
- 😂 おもしろ写真賞
- 📸 MVP（一番たくさん撮った人）

---

## 機能フロー図

```
【旅行の流れ】

┌─────────────────────────────────────────────────────┐
│  旅行前                                              │
├─────────────────────────────────────────────────────┤
│  1. ルーム作成（登録ユーザー）                        │
│  2. リンク/QRでメンバー招待                          │
│  3. メンバーがアプリDL → ルーム参加                  │
└─────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────┐
│  旅行中                                              │
├─────────────────────────────────────────────────────┤
│  4. 各自が写真を撮影（1日24枚まで）                   │
│  5. AIが自動チェック（失敗は返却）                   │
│  6. 撮影場所をGPSで自動記録                          │
│  7. 写真は「現像中」状態（まだ見れない）             │
└─────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────┐
│  旅行後（最終日の翌朝9時）                           │
├─────────────────────────────────────────────────────┤
│  8. 全員に現像完了通知                               │
│  9. タイムラインで全員の写真を閲覧                   │
│  10. マップで撮影場所を確認                          │
│  11. 写真をダウンロード（登録ユーザーのみ）          │
└─────────────────────────────────────────────────────┘
```

---

## 画面一覧（想定）

| 画面 | 概要 |
|---|---|
| ホーム | 参加中のルーム一覧 |
| ルーム作成 | 旅行情報入力フォーム |
| ルーム詳細 | タイムライン / マップ切り替え |
| カメラ | 撮影画面（残り枚数表示） |
| 写真詳細 | 写真 + 撮影者 + 場所 + ダウンロード |
| 招待 | QRコード / リンクコピー |
| 設定 | アカウント情報 / 通知設定 |

---

## UI/UXイメージ

### ゲストユーザーの撮影制限表示

```
┌─────────────────────────┐
│  📸 残り撮影枚数: 2/5    │
│  ─────────────────────  │
│  もっと撮影したい？      │
│  [無料でアカウント登録]  │
└─────────────────────────┘
```

### ダウンロード制限表示

```
┌─────────────────────────┐
│  🔒 ダウンロードには      │
│     アカウント登録が必要  │
│                          │
│  旅の思い出を保存しよう！ │
│  [無料で登録する]        │
└─────────────────────────┘
```

---

## プレミアム機能（課金）

| 機能 | 無料プラン | プレミアムプラン |
|---|:-:|:-:|
| 撮影枚数 | 24枚/日 | 36枚/日 |
| フィルター | 3種類 | 10種類 |
| ルーム作成 | 月1回 | 無制限 |
| 写真保存期間 | 3ヶ月 | 無制限 |
| ダウンロード画質 | 標準 | 高画質 |
| 日付スタンプ | 基本のみ | カスタム可 |

### 価格

- 月額: ¥480
- 年額: ¥4,800（月額換算 ¥400、16%オフ）

---

**詳細仕様**: [機能仕様書（完全版）](/Users/t-z/workspace/obsidian-notes/08_個人開発/Yoin. - 余韻 -/機能仕様書.md)

**最終更新**: 2024年12月
